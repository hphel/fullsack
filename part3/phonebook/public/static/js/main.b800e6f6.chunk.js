(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(18),o=n.n(a),c=n(7),s=n(9),u=n(3),i=n(0),d=function(e){var t=e.onChange;return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{onChange:t})]})},b=function(e){var t=e.onSubmit,n=e.onNameChange,r=e.onNumberChange;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:n})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{onChange:r})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.persons,n=e.onDelete;return t.map((function(e){return Object(i.jsxs)("div",{children:[e.name," ",e.number,Object(i.jsx)("button",{onClick:function(){return n(e.id)},children:" delete "})]},e.id)}))},j=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:t.status,children:t.content})},h=n(5),m=n.n(h),l="api/persons",p=function(){return m.a.get(l)},O=function(e){return m.a.post(l,e)},v=function(e){return m.a.delete("".concat(l,"/").concat(e))},x=function(e,t){return m.a.put("".concat(l,"/").concat(e),t)},g=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],o=Object(r.useState)(""),h=Object(u.a)(o,2),m=h[0],l=h[1],g=Object(r.useState)(""),w=Object(u.a)(g,2),C=w[0],k=w[1],S=Object(r.useState)(""),y=Object(u.a)(S,2),N=y[0],D=y[1],F=Object(r.useState)(null),I=Object(u.a)(F,2),E=I[0],J=I[1];Object(r.useEffect)((function(){p().then((function(e){return a(e.data)}))}),[]);var M=n.filter((function(e){return-1!==e.name.indexOf(N)}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:E}),Object(i.jsx)(d,{onChange:function(e){return D(e.target.value)}}),Object(i.jsx)(b,{onSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===m}));if(t&&t.number===C)alert("".concat(m," is already added to phonebook"));else if(t){if(window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with a new one ?"))){var r=Object(s.a)(Object(s.a)({},t),{},{number:C});x(t.id,r).then((function(e){if(200===e.status){var t=[].concat(Object(c.a)(n.filter((function(e){return e.id!==r.id}))),[r]);a(t),J({content:"Updated ".concat(r.name),status:"success"})}})).catch((function(e){e.response.data&&e.response.data.error?J({content:e.response.data.error,status:"error"}):404===e.response.status?J({content:"Information of ".concat(r.name," has already been removed from the server"),status:"error"}):J({content:"Failed to update ".concat(r.name),status:"error"})}))}}else{var o={name:m,number:C,id:Math.max.apply(Math,Object(c.a)(n.map((function(e){return e.id}))))+1};O(o).then((function(e){if(201===e.status){var t=[].concat(Object(c.a)(n),[o]);a(t),J({content:"Added ".concat(o.name),status:"success"})}})).catch((function(e){e.response.data&&e.response.data.error?J({content:e.response.data.error,status:"error"}):J({content:"Failed to add ".concat(o.name),status:"error"})}))}},onNameChange:function(e){return l(e.target.value)},onNumberChange:function(e){return k(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(f,{persons:M,onDelete:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name," ?"))&&v(e).then((function(r){if(200===r.status){var o=n.filter((function(t){return t.id!==e}));a(o),J({content:"Removed ".concat(t.name),status:"success"})}})).catch((function(e){e.response.data&&e.response.data.error?J({content:e.response.data.error,status:"error"}):404===e.response.status?J({content:"Information of ".concat(t.name," has already been removed from the server"),status:"error"}):J({content:"Failed to remove ".concat(t.name),status:"error"})}))}})]})};n(42);o.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.b800e6f6.chunk.js.map