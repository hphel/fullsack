(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(2),a=n(18),o=n.n(a),r=n(7),u=n(9),s=n(3),i=n(0),d=function(e){var t=e.onChange;return Object(i.jsxs)("div",{children:["filter shown with ",Object(i.jsx)("input",{onChange:t})]})},b=function(e){var t=e.onSubmit,n=e.onNameChange,c=e.onNumberChange;return Object(i.jsxs)("form",{onSubmit:t,children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{onChange:n})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{onChange:c})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.persons,n=e.onDelete;return t.map((function(e){return Object(i.jsxs)("div",{children:[e.name," ",e.number,Object(i.jsx)("button",{onClick:function(){return n(e.id)},children:" delete "})]},e.id)}))},j=function(e){var t=e.message;return null===t?null:Object(i.jsx)("div",{className:t.status,children:t.content})},h=n(5),l=n.n(h),m="api/persons",O=function(){return l.a.get(m)},v=function(e){return l.a.post(m,e)},p=function(e){return l.a.delete("".concat(m,"/").concat(e))},x=function(e,t){return l.a.put("".concat(m,"/").concat(e),t)},g=function(){var e=Object(c.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),h=Object(s.a)(o,2),l=h[0],m=h[1],g=Object(c.useState)(""),w=Object(s.a)(g,2),C=w[0],k=w[1],S=Object(c.useState)(""),y=Object(s.a)(S,2),N=y[0],D=y[1],F=Object(c.useState)(null),I=Object(s.a)(F,2),E=I[0],J=I[1];Object(c.useEffect)((function(){O().then((function(e){return a(e.data)}))}),[]);var M=n.filter((function(e){return-1!==e.name.indexOf(N)}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Phonebook"}),Object(i.jsx)(j,{message:E}),Object(i.jsx)(d,{onChange:function(e){return D(e.target.value)}}),Object(i.jsx)(b,{onSubmit:function(e){e.preventDefault();var t=n.find((function(e){return e.name===l}));if(t&&t.number===C)alert("".concat(l," is already added to phonebook"));else if(t){if(window.confirm("".concat(t.name," is already added to the phonebook, replace the old number with a new one ?"))){var c=Object(u.a)(Object(u.a)({},t),{},{number:C});x(t.id,c).then((function(e){if(200===e.status){var t=[].concat(Object(r.a)(n.filter((function(e){return e.id!==c.id}))),[c]);a(t),J({content:"Updated ".concat(c.name),status:"success"})}})).catch((function(e){404===e.response.status?J({content:"Information of ".concat(c.name," has already been removed from the server"),status:"error"}):J({content:"Failed to update ".concat(c.name),status:"error"})}))}}else{var o={name:l,number:C,id:Math.max.apply(Math,Object(r.a)(n.map((function(e){return e.id}))))+1};v(o).then((function(e){if(201===e.status){var t=[].concat(Object(r.a)(n),[o]);a(t),J({content:"Added ".concat(o.name),status:"success"})}})).catch((function(e){J({content:"Failed to add ".concat(o.name),status:"error"})}))}},onNameChange:function(e){return m(e.target.value)},onNumberChange:function(e){return k(e.target.value)}}),Object(i.jsx)("h2",{children:"Numbers"}),Object(i.jsx)(f,{persons:M,onDelete:function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Delete ".concat(t.name," ?"))&&p(e).then((function(c){if(200===c.status){var o=n.filter((function(t){return t.id!==e}));a(o),J({content:"Removed ".concat(t.name),status:"success"})}})).catch((function(e){404===e.response.status?J({content:"Information of ".concat(t.name," has already been removed from the server"),status:"error"}):J({content:"Failed to remove ".concat(t.name),status:"error"})}))}})]})};n(42);o.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.0077aaa1.chunk.js.map